apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: klinematrix-test

# Override namespace
namespace: klinematrix-test

# Base configuration
resources:
- ../../base
- alibaba-config.yaml
- secrets.yaml

# Test environment overrides
patchesStrategicMerge:
- backend-test-patch.yaml
- frontend-test-patch.yaml

# Environment-specific labels
commonLabels:
  environment: test

# Test-specific image tags (versioned for stability)
images:
- name: financial-agent/backend
  newTag: "test-v0.3.0"
- name: financial-agent/frontend
  newTag: "test-v0.3.0"

# Resource limits for test (10 beta users)
replicas:
- name: backend
  count: 1
- name: frontend
  count: 1
