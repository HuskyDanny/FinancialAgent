# Frontend v0.8.11

**Release Date**: 2025-10-26
**Docker Image**: `klinematrix/frontend:test-v0.8.11`

## Overview

Feature release adding agent mode toggle UI, allowing users to switch between v2 (Copilot mode with manual tools) and v3 (Agent mode with automatic tool calling) when starting a new chat.

## Features Added

- **Agent mode toggle UI**
  - Visual toggle buttons for switching between modes (ðŸ¤– Agent / ðŸ‘¤ Copilot)
  - Mode locked once chat is created (cannot change mid-chat)
  - Mode resets when clicking "New Chat"
  - Clear visual feedback with gradient backgrounds
  - Disabled state with tooltip explaining mode locking

- **Agent version parameter integration**
  - Pass `agent_version` (v2/v3) to backend API
  - Supports backend's credit system fix (v0.5.8)

## Technical Details

### Files Modified

**frontend/src/components/EnhancedChatInterface.tsx** (`EnhancedChatInterface.tsx:37-415`)
- Added `agentMode` state (defaults to "v3")
- Agent mode toggle UI in chat input area
- Passed `agentMode` to `useAnalysis` hook

**frontend/src/components/chat/useAnalysis.ts** (`useAnalysis.ts:39, 132`)
- Added `agentMode` parameter to function signature
- Passed `agent_version` to API in model settings

### UI Behavior

**Mode Selection Rules:**
1. Default: v3 (Agent mode) for new users
2. Toggle enabled: Only when `chatId === null` (new chat)
3. Toggle disabled: When `chatId` exists (chat in progress)
4. Visual feedback: Gradient backgrounds, disabled opacity, tooltip messages

**Mode Descriptions:**
- **v3 (Agent)**: Autonomous tool calling, LLM decides when to use tools
- **v2 (Copilot)**: Manual mode, user clicks buttons for analysis

## Breaking Changes

None

## Compatibility

| Component | Required Version |
|-----------|-----------------|
| Backend | v0.5.8+ (for agent mode support) |

## Known Issues

None

## Migration Guide

No migration required. Existing chats will continue using their original mode (locked at creation).

**User Experience:**
- Existing v3 chats: Continue as Agent mode
- Existing v2 chats: Continue as Copilot mode
- New chats: Users can choose mode before first message
