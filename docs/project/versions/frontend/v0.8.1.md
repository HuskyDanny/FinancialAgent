# frontend v0.8.1

**Release Date**: 2025-10-12
**Docker Image**: `financial-agent/frontend:0.8.1`

## Overview

Major UX enhancement release adding comprehensive OHLC (Open, High, Low, Close) tooltip with volume display, date range visibility, and critical performance optimizations for chart interactions.

## Features Added

### Chart Tooltip Enhancement
- **OHLC Price Display**: Full candlestick data (Open/High/Low/Close) on hover
- **Volume Display**: Formatted volume with M/K notation (e.g., "45.2M", "1.5K")
- **Direction Indicators**: Color-coded arrows (↑ green for gains, ↓ red for losses)
- **Improved Styling**: Larger tooltip with monospace font, better spacing, shadow effects

### Date Range Visibility
- **Chart Date Range Label**: Displays "Showing data from Apr 11, 2025 to Oct 10, 2025 (182 days)"
- **Styled Badge**: Gray background with rounded corners, proper spacing (mt-6 mb-4)
- **Auto-calculation**: Computes day count between start and end dates

### Performance Optimizations
- **Volume Lookup Optimization**: O(n) → O(1) using pre-built Map for timestamp lookups
- **Date Range Memoization**: Prevents recalculation on every render (useMemo)
- **Volume Map Caching**: Builds once when data changes, reused across all mouse moves

## Bug Fixes

None (feature release)

## Technical Details

### Volume Lookup Pattern
```typescript
// Build map once when data changes
const volumeMapRef = useRef<Map<string, number>>(new Map());
useEffect(() => {
  const newVolumeMap = new Map<string, number>();
  for (const point of originalData) {
    const dateKey = point.time.includes("T") ? point.time.split("T")[0] : point.time;
    newVolumeMap.set(dateKey, point.volume);
  }
  volumeMapRef.current = newVolumeMap;
}, [originalData]);

// O(1) lookup in mouse move handler
volume = volumeMapRef.current.get(timeDate);
```

### Performance Impact
- **Before**: O(n) `Array.find()` on every mouse move (60fps = 15,120-23,400 ops/sec)
- **After**: O(1) `Map.get()` lookup
- **Improvement**: 252-390x faster per lookup, smooth chart interactions

### Date Range Memoization
```typescript
const dateRangeText = React.useMemo(() => {
  // Calculation only when data changes
  return `Showing data from ${formatDate(startDate)} to ${formatDate(endDate)} (${daysDiff} days)`;
}, [data]);
```

## Breaking Changes

None

## Compatibility

| Component | Required Version |
|-----------|-----------------|
| Backend | >= 0.5.1 |
| lightweight-charts | >= 4.0.0 |

## Known Issues

- TradingView Lightweight Charts doesn't expose volume through hover API, requiring separate lookup mechanism
- Chart tooltip may not display volume for intraday intervals if timestamp format differs from daily format

## Migration Guide

No migration needed - all changes are backward compatible.

Users will immediately see:
1. Full OHLC data when hovering over candlesticks
2. Volume information with formatted display
3. Date range label below every chart
4. Smoother chart interactions (performance improvement)
