# Backend v0.6.2

**Release Date**: 2025-01-14
**Docker Image**: `financial-agent/backend:0.6.2`

## Overview

Performance optimization release that adds Redis caching to the market movers endpoint, reducing Alpha Vantage API calls and improving response times.

## Features Added

### Market Movers Caching
- **30-minute Redis caching** for `/api/market/market-movers` endpoint
- Reduces Alpha Vantage API calls by **12x per 6-hour period**
- Improves response time by **50-100x for cached requests**
- Cache key: `market_movers:top_gainers_losers`
- TTL: 1800 seconds (30 minutes)

**Performance Impact:**
- Uncached requests: ~300-500ms (API call to Alpha Vantage)
- Cached requests: ~5-10ms (Redis lookup)
- API efficiency: 1 call per 30 minutes vs 1 call per request

**Rationale:**
Market movers data changes throughout the trading day but not every second. The 30-minute TTL balances data freshness with API efficiency, making it suitable for dashboard overview use cases while staying within Alpha Vantage free tier limits (25 calls/day).

## Technical Details

### Files Modified
- `backend/src/api/market_data.py`
  - Added `redis_cache` dependency to `get_market_movers()`
  - Implemented cache-first lookup pattern
  - Added structured logging for cache hits/misses
  - Updated docstring with caching details

### Dependencies
- Uses existing Redis cache infrastructure (`RedisCache`)
- Uses existing cache TTL configuration (`cache_utils.get_tool_ttl()`)
- No new external dependencies

### Cache Configuration
Located in `backend/src/core/utils/cache_utils.py`:
```python
TOOL_TTL_MAP = {
    "TOP_GAINERS_LOSERS": 1800,  # 30 minutes
}
```

## Bug Fixes

- Applied code formatting fixes (black, ruff) to market_data.py

## Breaking Changes

None

## Compatibility

| Component | Required Version |
|-----------|-----------------|
| Redis | 6.0+ |
| Frontend | Any (no changes required) |

## Known Issues

None

## Migration Guide

No migration needed. The caching is transparent to API consumers and automatically enabled on deployment.

### Monitoring Cache Behavior

```bash
# Check cache hit/miss in logs
docker compose logs backend | grep "Market movers cache"

# Check cache TTL
docker compose exec redis redis-cli TTL market_movers:top_gainers_losers

# Clear cache manually (for testing)
docker compose exec redis redis-cli DEL market_movers:top_gainers_losers
```

## Deployment Notes

After deployment:
1. Backend automatically uses cached data when available
2. Monitor backend logs for cache hit/miss ratio
3. First request after deployment will be a cache miss (expected)
4. Subsequent requests within 30 minutes will be cache hits
